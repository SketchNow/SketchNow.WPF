<UserControl x:Class="SketchNow.Views.PageNavigationView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:SketchNow.Views"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:valueConverters="http://schemas.superdev.ch/valueconverters/2016/xaml"
             xmlns:vms="clr-namespace:SketchNow.ViewModels"
             d:DataContext="{d:DesignInstance IsDesignTimeCreatable=False,
                                              Type={x:Type vms:MainWindowViewModel}}"
             d:DesignHeight="300"
             d:DesignWidth="800"
             FontFamily="Segoe UI, Arial, Microsoft YaHei UI, SimSun"
             mc:Ignorable="d">
  <UserControl.Resources>
    <valueConverters:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter" />
  </UserControl.Resources>
  <materialDesign:DrawerHost Margin="5"
                             IsBottomDrawerOpen="True" Visibility="{Binding IsMultiPageMode, Converter={StaticResource BoolToVisibilityConverter}}"
                             OpenMode="Standard">
    <materialDesign:DrawerHost.BottomDrawerContent>
      <Grid>
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="Auto" />
          <ColumnDefinition Width="*" />
          <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>
        <Button Grid.Column="0" Command="{x:Static materialDesign:DrawerHost.CloseDrawerCommand}"
                DockPanel.Dock="Left"
                Style="{StaticResource MaterialDesignIconButton}"
                ToolTip="MaterialDesignIconButton">
          <materialDesign:PackIcon Kind="Close" />
        </Button>
        <ScrollViewer Grid.Column="1" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Hidden">
          <ListBox ItemsSource="{Binding CanvasPages.Pages}" SelectedIndex="{Binding CanvasPages.SelectedIndex}">
            <ListBox.ItemTemplate>
              <DataTemplate>
                <InkPresenter Width="100"
                              Height="50"
                              Strokes="{Binding Strokes}">
                  <InkPresenter.RenderTransform>
                    <ScaleTransform ScaleX="0.05" ScaleY="0.05" />
                  </InkPresenter.RenderTransform>
                </InkPresenter>
              </DataTemplate>
            </ListBox.ItemTemplate>
            <ListBox.ItemsPanel>
              <ItemsPanelTemplate>
                <VirtualizingStackPanel Orientation="Horizontal" />
              </ItemsPanelTemplate>
            </ListBox.ItemsPanel>
          </ListBox>
        </ScrollViewer>

        <Button Grid.Column="2" Command="{x:Static materialDesign:DrawerHost.CloseDrawerCommand}"
                DockPanel.Dock="Right"
                Style="{StaticResource MaterialDesignIconButton}"
                ToolTip="MaterialDesignIconButton">
          <materialDesign:PackIcon Kind="Close" />
        </Button>
      </Grid>
    </materialDesign:DrawerHost.BottomDrawerContent>
    <StackPanel HorizontalAlignment="Right"
                VerticalAlignment="Bottom"
                Background="#09000000"
                Orientation="Horizontal"
                >
      <Button Height="48"
              Command="{Binding CanvasPages.PreviousCommand}"
              Content="{materialDesign:PackIcon Kind=ArrowLeft}"
              Style="{StaticResource MaterialDesignFlatButton}" />
      <Button Height="48"
              Command="{Binding CanvasPages.NextCommand}"
              Content="{materialDesign:PackIcon Kind=ArrowRight}"
              Style="{StaticResource MaterialDesignFlatButton}" />
      <Button Width="200"
              Height="48"
              Command="{x:Static materialDesign:DrawerHost.OpenDrawerCommand}"
              Style="{StaticResource MaterialDesignFlatButton}">
        <TextBlock VerticalAlignment="Center"><Run Text="{Binding CanvasPages.SelectedIndex, Mode=OneWay}" /><Run Text=" / " /><Run Text="{Binding CanvasPages.Pages.Count, ConverterParameter=-1, Converter={StaticResource MathAddConverter}, Mode=OneWay}" /></TextBlock>
      </Button>
      <Button Height="48"
              Command="{Binding CanvasPages.AddPageCommand}"
              Content="{materialDesign:PackIcon Kind=Plus}"
              Style="{StaticResource MaterialDesignFlatButton}" />
    </StackPanel>
  </materialDesign:DrawerHost>

</UserControl>
